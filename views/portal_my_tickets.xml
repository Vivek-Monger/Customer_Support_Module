<odoo>
  <template id="portal_my_tickets" name="My Tickets">
    <t t-call="portal.portal_layout">

      <!-- Breadcrumbs = submenu -->
      <t t-set="breadcrumbs" t-value="[
        ('/my', 'My Account'),
        ('/my/tickets', 'Customer Support / My Tickets')
      ]"/>

      <div class="container mt-4">

        <h2>My Tickets</h2>

        <!-- Optional submenu tabs -->
        <ul class="nav nav-tabs mb-3">
          <li class="nav-item">
            <a class="nav-link active" href="/my/tickets">
              My Tickets
            </a>
          </li>
        </ul>

        <table class="table table-striped">
          <thead>
            <tr>
              <th>Ticket</th>
              <th>Subject</th>
              <th>Priority</th>
              <th>Status</th>
            </tr>
          </thead>

          <tbody>
            <t t-foreach="tickets" t-as="ticket">
              <tr>
                <td><t t-esc="ticket.ticket_id"/></td>
                <td><t t-esc="ticket.subject"/></td>
                <td>
                  <span t-if="ticket.priority == '0'">Low</span>
                  <span t-if="ticket.priority == '1'">Medium</span>
                  <span t-if="ticket.priority == '2'">High</span>
                  <span t-if="ticket.priority == '3'">Urgent</span>
                </td>
                <td>
                  <t t-esc="ticket.phase_id.phase if ticket.phase_id else ''"/>
                </td>
              </tr>
            </t>
          </tbody>
        </table>

        <t t-if="not tickets">
          <p class="text-muted">No tickets found.</p>
        </t>

      </div>
    </t>
  </template>
</odoo>
